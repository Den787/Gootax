
session_start - должно быть вверху страницы, а не вызывается после определенных действий.
после header - exit()
проверка на $_SESSION['auth'] есть, а на $_COOKIE['name'] нет, да и не фильтруется никак.

хватит?
----------------------------------
Для небольшого понимания, как войти на сайт, ну как бы нормально получилось, но неправильно, пускать всех, просто так.

Создай хотя бы какой-нибудь массив для начала, с логинами и проверяй, есть ли данный логин, который пришёл из формы,
в этом массиве.

Пароль должен быть обязательно.
Обязательно сделай вывод ошибок error_reporting(E_ALL)

Пароль надо солить, что бы вкуснее было)

После того, как всё это сделаешь читай про токены.
-------------------------------------

Логика вроде правильно сделана. Но читать тяжело, как-то много скобок. Я по возможности стараюсь как-то так писать,
 чтобы не if, а потом партянка, а наоборот, if(!$not) - стоп или ещё что-то, а рабочий код просто без блоков.

У тебя довольно простой скрипт, но как-то тяжело воспринимается. Ты ещё вопрос сформулировал так, что ответов тут
 ждать странно.

